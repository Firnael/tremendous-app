<!-- Roster page -->
<!-- Sidebar -->
<trmds-side-bar page="roster"></trmds-side-bar>

<div class="rows-wrapper" ng-class="$root.open">

<div class="row title-bar">
  <div class="col-md-12">
    <h2>Roster <small class="fade" ng-show="vm.mains.length">
      {{ vm.mains.length }} blaireaux - ilvl moyen: {{ vm.getAverageIlvl() }}
      </small>
    </h2>
  </div>
</div>
<br/>

<div class="row">

  <!-- Roster -->
  <span class="fade" ng-show="vm.mains.length">
    <div class="col-md-3">
      <!-- Tanks -->
      <div ng-repeat="main in vm.mains | orderBy:['+class', '-averageItemLevel']" class="roster-item"
           ng-if="main.role === 0" ng-click="vm.selectMain(main)">
        <span class="roster-item-ilvl" ng-class="vm.getIlvlColor(main.averageItemLevel)">{{ main.averageItemLevel }}</span>
        <trmds-role-icons role="{{ main.role }}" size="30"></trmds-role-icons>
        <span class="roster-item-name" ng-class="vm.getClassColor(main.class)">{{ main.name }}</span>
      </div>
      <trmds-role-icons role="0" size="30"></trmds-role-icons>
      <span class="text-muted">Ok les tanks faut venir</span>
      <br/><br/>
      <!-- Heals -->
      <div ng-repeat="main in vm.mains | orderBy:['+class', '-averageItemLevel']" class="roster-item"
           ng-if="main.role === 1" ng-click="vm.selectMain(main)">
        <span class="roster-item-ilvl" ng-class="vm.getIlvlColor(main.averageItemLevel)">{{ main.averageItemLevel }}</span>
        <trmds-role-icons role="{{ main.role }}" size="30"></trmds-role-icons>
        <span class="roster-item-name" ng-class="vm.getClassColor(main.class)">{{ main.name }}</span>
      </div>
    </div>
    <!-- Dps -->
    <div class="col-md-3">
        <div ng-repeat="main in vm.mains | orderBy:['+class', '-averageItemLevel']" class="roster-item"
             ng-if="main.role === 2" ng-click="vm.selectMain(main)">
          <span class="roster-item-ilvl" ng-class="vm.getIlvlColor(main.averageItemLevel)">{{ main.averageItemLevel }}</span>
          <trmds-role-icons role="{{ main.role }}" size="30"></trmds-role-icons>
          <span class="roster-item-name" ng-class="vm.getClassColor(main.class)">{{ main.name }}</span>
        </div>
    </div>
  </span>

  <!-- Selected character -->
  <div class="col-md-4 fade" ng-show="vm.displayMain">

    <!-- Main -->
    <div class="media">
      <div class="media-left">
        <a><img class="media-object img-thumbnail" ng-src="{{ vm.getThumbnailPath(vm.selectedMain) }}"></a>
      </div>
      <div class="media-body">
        <h4 class="media-heading" ng-class="vm.getClassColor(vm.selectedMain.class)">
          {{ vm.selectedMain.name }}
          <small><trmds-guild-rank rank="{{ vm.selectedMain.guildRank }}"></trmds-guild-rank></small>
        </h4>
        <a ng-href="#/character/{{ vm.selectedMain.name }}" class="btn btn-sm btn-default">
          <i class="fa fa-search" aria-hidden="true"></i>
        </a>
      </div>
    </div>

    <!-- Rerolls -->
    <hr/>
    <div class="media"
         ng-repeat="reroll in vm.selectedRerolls | orderBy:['+guildRank','-achievementPoints','-averageItemLevel']">
      <div class="media-left">
        <a><img class="media-object img-thumbnail" ng-src="{{ vm.getThumbnailPath(reroll) }}" width="60" height="60"></a>
      </div>
      <div class="media-body">
        <h4 class="media-heading" ng-class="vm.getClassColor(reroll.class)">
          {{ reroll.name }}
          <small><trmds-guild-rank rank="{{ reroll.level }}"></trmds-guild-rank></small>
        </h4>
        <a ng-href="#/character/{{ reroll.name }}" class="btn btn-xs btn-default">
          <i class="fa fa-search" aria-hidden="true"></i>
        </a>
      </div>
    </div>
    <!-- No rerolls -->
    <h3 class="text-muted" ng-show="vm.displayMain && vm.selectedRerolls.length === 0">Aucun rerolls</h3>
  </div>
</div>
</div>
